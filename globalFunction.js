import jwt from"jsonwebtoken";import{include}from"./settings.js";export function str_replace(e,r,o){return Array.isArray(e)?e.forEach((e,t)=>o=o.replace(new RegExp(e,"g"),r[t])):o=o.replace(new RegExp(e,"g"),r),o.replace(/^"(.*)"$/,"$1")}export const generateRandomNo=e=>{e||(e=16);for(var r="",o=0;o<e;o++){var t=Math.floor(10*Math.random());r+="1234567890".substring(t,t+1)}return r};export const generateAccessToken=e=>jwt.sign({id:e},include.TOKEN_SECRET,{expiresIn:"20h"});export const getIp=e=>e&&e.headers&&(e.headers["x-forwarded-for"]||e.socket.remoteAddress)||"unknown";export const getDevice=e=>{if(!e||!e.headers)return{userAgent:"unknown",isMobile:!1,isDesktop:!0};const r=e.headers["user-agent"]||"unknown";return{userAgent:r,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r),isDesktop:!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r)}};export const getLocation=e=>"nill";export const staff={id:"68f50a23daa688507ce2c54f",school:"68f50a23daa688507ce2c551"};export const getAbsoluteUrl=(e,r)=>{const o=`${e.protocol}://${e.get("host")}`;return new URL(r,o).href};