import mongoose from"mongoose";const{Schema:Schema}=mongoose,studentInfoSchema=new Schema({firstName:{type:Boolean,default:!1},lastName:{type:Boolean,default:!1},email:{type:Boolean,default:!1},class:{type:Boolean,default:!1},teacherName:{type:Boolean,default:!1},phoneNumber:{type:Boolean,default:!1},studentNumber:{type:Boolean,default:!1}},{_id:!1}),settingsSchema=new Schema({anonymizeExam:{type:Boolean,default:!1},enableScreenRecording:{type:Boolean,default:!1},shuffleQuestions:{type:Boolean,default:!1},shuffleAnswer:{type:Boolean,default:!1},enableTips:{type:Boolean,default:!0},listViewMode:{type:Boolean,default:!1},showResult:{type:Boolean,default:!1},hideSection:{type:Boolean,default:!1},skipQuestion:{type:Boolean,default:!1},emailResult:{type:Boolean,default:!1},emailSubjectOption:{type:String,enum:["default","custom","examName"],default:"default"},customEmailSubject:{type:String,default:""},percentagePass:{type:Boolean,default:!1},percentagePassValue:{type:Number,default:60},setTimeLimit:{type:Boolean,default:!1},timeLimitMinutes:{type:Number,default:60},studentSelfResume:{type:Boolean,default:!1},connectLMS:{type:String,enum:["","google","microsoft"],default:""},studentInfo:{type:studentInfoSchema,default:()=>({})},writingArea:{type:String,enum:["blank","defineContent","mirrorExam","no"],default:"blank"},spellcheck:{type:String,enum:["no","english","french"],default:"no"},uploadViaQR:{type:Boolean,default:!1},uploadViaFiles:{type:Boolean,default:!1},textToSpeech:{type:Boolean,default:!1},allowTranslation:{type:Boolean,default:!1},translationLimit:{type:String,enum:["wordsOnly","fullSentence"],default:"wordsOnly"},englishSynonyms:{type:Boolean,default:!1},dictionary:{type:Boolean,default:!1},dictionaryDetail:{type:String,enum:["includeExamples","definitionOnly"],default:"includeExamples"},audioFiles:{type:Boolean,default:!1},audioPassword:{type:String,default:""},activateAudioForAll:{type:Boolean,default:!1},drawingTool:{type:Boolean,default:!1},calculator:{type:Boolean,default:!1},geoGebra:{type:Boolean,default:!1},geoGebraType:{type:String,enum:["classic","suit"],default:"classic"},desmos:{type:Boolean,default:!1},programming:{type:Boolean,default:!1},audioRecorder:{type:Boolean,default:!1},mathFormulas:{type:String,enum:["ibAnalysis","basic"],default:"ibAnalysis"},chemistryTables:{type:String,enum:["periodicOnly","none"],default:"periodicOnly"},externalResourceName:{type:String,default:""},externalResourceURL:{type:String,default:""},feedbackURL:{type:String,default:""},lockdownMode:{type:String,enum:["high","medium","disabled"],default:"high"},allowMediumFallback:{type:Boolean,default:!1},fullScreenConsequence:{type:String,enum:["requireExplanation","defineContent","mirrorExam","no"],default:"requireExplanation"}},{_id:!1}),sectionSchema=new Schema({id:{type:String,required:!0},title:{type:String,required:!0,trim:!0},description:{type:String,default:""},questionIds:[{type:String}]},{_id:!1}),examSchema=new Schema({name:{type:String,required:!0,trim:!0},school:[{type:Schema.Types.ObjectId,ref:"School"}],staff:[{type:Schema.Types.ObjectId,ref:"Staff"}],examKey:{type:String,required:!0},access:{type:String,enum:["Open","Closed","Discoverable","Scheduled"],default:"closed"},is_scheduled:{type:Boolean,default:!1},schedule:{type:Date,default:""},group:[{type:Schema.Types.ObjectId,ref:"Group"}],examFormat:{type:String,enum:["auto_marked","free_form","pdf","skip_digital"],required:!0},questions:[{type:Schema.Types.ObjectId,ref:"Question"}],sections:[sectionSchema],useSections:{type:Boolean,default:!1},freeFormContent:{type:String},pdfFile:{type:String},settings:{type:settingsSchema,default:()=>({})},status:{type:String,enum:["Active","Inactive","Archived"],default:"Active"},is_deleted:{type:Boolean,default:!1},date_deleted:{type:Date,default:null}},{timestamps:!0});examSchema.index({createdBy:1,status:1}),examSchema.index({name:"text"}),examSchema.index({is_deleted:1});const Exam=mongoose.model("Exam",examSchema);export default Exam;